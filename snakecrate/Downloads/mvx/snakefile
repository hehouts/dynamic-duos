# LOOK OUT! ITS A
#
#██╗   ██╗    ██╗    ██████╗ 
#██║   ██║    ██║    ██╔══██╗
#██║   ██║    ██║    ██████╔╝
#╚██╗ ██╔╝    ██║    ██╔══██╗
# ╚████╔╝     ██║    ██║  ██║
#  ╚═══╝      ╚═╝    ╚═╝  ╚═╝
                            
# ██████╗      ██████╗     ██╗    ██╗    ███╗   ██╗    ██╗          ██████╗      █████╗     ██████╗ 
# ██╔══██╗    ██╔═══██╗    ██║    ██║    ████╗  ██║    ██║         ██╔═══██╗    ██╔══██╗    ██╔══██╗
# ██║  ██║    ██║   ██║    ██║ █╗ ██║    ██╔██╗ ██║    ██║         ██║   ██║    ███████║    ██║  ██║
# ██║  ██║    ██║   ██║    ██║███╗██║    ██║╚██╗██║    ██║         ██║   ██║    ██╔══██║    ██║  ██║
# ██████╔╝    ╚██████╔╝    ╚███╔███╔╝    ██║ ╚████║    ███████╗    ╚██████╔╝    ██║  ██║    ██████╔╝
# ╚═════╝      ╚═════╝      ╚══╝╚══╝     ╚═╝  ╚═══╝    ╚══════╝     ╚═════╝     ╚═╝  ╚═╝    ╚═════╝ 
#
# SNAKEFILE!                                                                                           

# This literally only downloads the virome data. Cramming it into the main snakefile would be too messy too messy.                                                                                                  

# I use these resources to run this:
#   srun -p bmm -J download -t 12:00:00 --mem=2G -c 4 --pty bash
# so that I can use -j4 when running snakemake
# and the conda envronment (dynduo)                                                                                                
                               
# ███ set variables ███

#INPUT_DATA = "vir_744_filenames.txt"
#INPUT_DATA = "s5_vir_filenames.txt"
INPUT_DATA = "oops.txt"

# keeps the .tar
FILES = [x.strip().split("\n")[0] for x in open(INPUT_DATA, 'r')]

# no .tar
SAMPLES = [x.strip().split(".tar")[0] for x in open(INPUT_DATA, 'r')]

# ██████████ RULE ALL ██████████

rule all: 
    input: 
##   rule download_data
        expand("../../data/raw_data/vir/tars/{file}", file = FILES),

# ██████████   RULES  ██████████
rule download_data:
    output: "../../data/raw_data/vir/tars/{file}"
    params: 
        URL= lambda wildcards: "https://ibdmdb.org/tunnel/static/HMP2/Viromics/1732/" + wildcards.file
    shell: """
        wget -O {output} {params.URL}
    """
